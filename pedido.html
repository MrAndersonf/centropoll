<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
    <meta name="generator" content="Hugo 0.84.0">
    <title>Centropool - Central de Gerenciamento de Insumos</title>





    <!-- Bootstrap core CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">




    <style>
        .bd-placeholder-img {
            font-size: 1.125rem;
            text-anchor: middle;
            -webkit-user-select: none;
            -moz-user-select: none;
            user-select: none;
        }

        @media (min-width: 768px) {
            .bd-placeholder-img-lg {
                font-size: 3.5rem;
            }
        }
    </style>


    <!-- Custom styles for this template -->
    <link href="index.css" rel="stylesheet">
</head>

<body>

    <header class="navbar navbar-dark sticky-top bg-dark flex-md-nowrap p-0 shadow">
        <a class="navbar-brand col-md-3 col-lg-2 me-0 px-3" href="#">Centropool - Rondonópolis</a>
        <button class="navbar-toggler position-absolute d-md-none collapsed" type="button" data-bs-toggle="collapse"
            data-bs-target="#sidebarMenu" aria-controls="sidebarMenu" aria-expanded="false"
            aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <input class="form-control form-control-dark w-100" type="text" placeholder="Search" aria-label="Search">
        <div class="navbar-nav">
            <div class="nav-item text-nowrap">
                <a class="nav-link px-3" href="#">Sign out</a>
            </div>
        </div>
    </header>

    <div class="container-fluid">
        <div class="row">
            <nav id="sidebarMenu" class="col-md-3 col-lg-2 d-md-block bg-light sidebar collapse">
                <div class="position-sticky pt-3">
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link active" aria-current="page" href="/">
                                <span data-feather="home"></span>
                                Dashboard
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="./pedido.html">
                                <span data-feather="file"></span>
                                Pedidos
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="./produto.html">
                                <span data-feather="shopping-cart"></span>
                                Produtos
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="./cliente.html">
                                <span data-feather="users"></span>
                                Clientes
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="./relatorios">
                                <span data-feather="bar-chart-2"></span>
                                Relatórios
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="./configuracao.html">
                                <span data-feather="layers"></span>
                                Configurações
                            </a>
                        </li>
                    </ul>

                    <h6
                        class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted">
                        <span>Saved reports</span>
                        <a class="link-secondary" href="#" aria-label="Add a new report">
                            <span data-feather="plus-circle"></span>
                        </a>
                    </h6>
                    <ul class="nav flex-column mb-2">
                        <li class="nav-item">
                            <a class="nav-link" href="#">
                                <span data-feather="file-text"></span>
                                Current month
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">
                                <span data-feather="file-text"></span>
                                Last quarter
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">
                                <span data-feather="file-text"></span>
                                Social engagement
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">
                                <span data-feather="file-text"></span>
                                Year-end sale
                            </a>
                        </li>
                    </ul>
                </div>
            </nav>

            <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4" id="main-pedidos">
                <div
                    class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                    <h1 class="h2">Pedidos</h1>
                    <div class="btn-toolbar mb-2 mb-md-0">
                        <div class="btn-group me-2">
                            <button type="button" class="btn btn-sm btn-outline-secondary">Share</button>
                            <button type="button" class="btn btn-sm btn-outline-secondary">Export</button>
                        </div>
                        <button type="button" class="btn btn-sm btn-outline-secondary dropdown-toggle">
                            <span data-feather="calendar"></span>
                            This week
                        </button>
                    </div>
                </div>
                <div class="table-responsive">
                    <h5 id="fornecedor-firebase"></h5>
                    <table class="table" style="width: 100%; overflow-y:hidden;">
                        <thead>
                            <tr>
                                <th scope="col">#</th>
                                <th scope="col">Produto</th>
                                <th scope="col">Quantidade</th>
                                <th scope="col">Valor</th>
                                <th scope="col">Ações</th>
                            </tr>
                        </thead>
                        <tbody id="table-produtos">
                            <tr>
                                <th scope="row"></th>
                                <td><input style="border: none;" id="nome-firebase0" type="text"></td>
                                <td><input style="border: none;" id="quantidade-firebase0" type="text"></td>
                                <td><input style="border: none;" id="valor-firebase0" type="text"></td>

                                <td>
                                    <div>
                                        <button class="btn" onclick="writeRecipeToFirebase('0')">
                                            <img src="./icons/edit.svg" />
                                        </button>
                                        <button class="btn">
                                            <img src="./icons/delete.svg" />
                                        </button>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <th scope="row"></th>
                                <td><input style="border: none;" id="nome-firebase1" type="text"></td>
                                <td><input style="border: none;" id="quantidade-firebase1" type="text"></td>
                                <td><input style="border: none;" id="valor-firebase1" type="text"></td>

                                <td>
                                    <div>
                                        <button class="btn" onclick="writeRecipeToFirebase('1')">
                                            <img src="./icons/edit.svg" />
                                        </button>
                                        <button class="btn">
                                            <img src="./icons/delete.svg" />
                                        </button>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <th scope="row"></th>
                                <td><input style="border: none;" id="nome-firebase2" type="text"></td>
                                <td><input style="border: none;" id="quantidade-firebase2" type="text"></td>
                                <td><input style="border: none;" id="valor-firebase2" type="text"></td>

                                <td>
                                    <div>
                                        <button class="btn" onclick="writeRecipeToFirebase('2')">
                                            <img src="./icons/edit.svg" />
                                        </button>
                                        <button class="btn">
                                            <img src="./icons/delete.svg" />
                                        </button>
                                    </div>
                                </td>
                            </tr>

                        </tbody>
                    </table>
                </div>
            </main>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous">
        </script>


    <script src="https://cdn.jsdelivr.net/npm/feather-icons@4.28.0/dist/feather.min.js"
        integrity="sha384-uO3SXW5IuS1ZpFPKugNNWqTZRRglnUJK6UAZ/gxOX80nxEkN9NcGZTftn6RzhGWE"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.4/dist/Chart.min.js"
        integrity="sha384-zNy6FEbO50N+Cg5wap8IKA4M/ZnLJgzc6w2NqACZaK0u0FXfOWRRJOnQtpZun8ha"
        crossorigin="anonymous"></script>
    <script src="index.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.1/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.1/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.1/firebase-analytics.js"></script>
    <script>
        let recipeIngredients = [];
        let listOfIngredients = [];
        let subjectsList = [];
        let recipe_obj = new Object();
        let section = new Object();
        let rows = [];

        var firebaseConfig = {
            apiKey: "AIzaSyCKDICRkVxUdBBtrlENCC_X3oOTed92UTw",
            authDomain: "myappproject-5852a.firebaseapp.com",
            projectId: "myappproject-5852a",
            storageBucket: "myappproject-5852a.appspot.com",
            messagingSenderId: "994101301871",
            appId: "1:994101301871:web:93554248936885f709b39a",
            measurementId: "G-X968L09L5K",
        };

        firebase.initializeApp(firebaseConfig);

        firebase.analytics();

        var firestore = firebase.firestore();

        readVideoFromFirebase();

        //   confirmDeleteNotify("dsds");

        //   function hasInvalidInputs(inputs) {
        //     let invalids = 0;
        //     inputs.forEach((input) => {
        //       if (input === "") {
        //         invalids += 1;
        //         console.log(invalids);
        //       }
        //     });
        //     if (invalids > 0) {
        //       notify("Existem campos obrigatórios não preenchidos.");
        //       return true;
        //     }
        //     return false;
        //   }
        //   function writeVideoToFirebase(e) {
        //     e.preventDefault();
        //     let _id = getElement("id");
        //     let _title = getElement("title");
        //     let inputs = [_id.value, _title.value];
        //     if (hasInvalidInputs(inputs)) return;
        //     if (isEmpty(subjectsList)) return;
        //     let path = `Videos/${_id.value}`;
        //     const docref = firestore.doc(path);
        //     docref
        //       .set({
        //         id: _id.value,
        //         title: _title.value,
        //         tags: [...subjectsList],
        //         likes: [],
        //         comments: [],
        //       })
        //       .then(() => {
        //         readVideoFromFirebase();
        //         _id.value = "";
        //         _title.value = "";
        //         subjectsList = [];
        //         cleanChildren("subjects_container");
        //         notify("Registro salvo com sucesso!");
        //       })
        //       .catch((err) => console.log(err));
        //   }
        //   function writeRecipeToFirebase(e) {
        //     e.preventDefault();
        //     let _id = getElement("recepi_id");
        //     let _name = getElement("recepi_name");
        //     let inputs = [_id.value, _name.value];
        //     if (hasInvalidInputs(inputs)) return;
        //     if (isEmpty(subjectsList)) return;
        //     let path = `Videos/${_id.value}`;
        //     const docref = firestore.doc(path);
        //     docref
        //       .set({
        //         id: _id.value,
        //         name: _name.value,
        //       })
        //       .then(() => {
        //         readVideoFromFirebase();
        //         _id.value = "";
        //         _name.value = "";
        //         cleanChildren("subjects_container");
        //         notify("Registro salvo com sucesso!");
        //       })
        //       .catch((err) => console.log(err));
        //   }
        //   function editVideoFromFirebase() {
        //     let _id = $("#idEdit").val();
        //     let _title = $("#titleEdit").val();
        //     let _tag = $("#tagEdit").val();
        //     if (_id && _title && _tag !== "") {
        //       const docref = firestore.doc(`Videos/${_id}`);
        //       docref
        //         .set({
        //           id: _id,
        //           title: _title,
        //           tags: [..._tag.split(",")],
        //         })
        //         .then(() => {
        //           readVideoFromFirebase();
        //           $("#idEdit").val("");
        //           $("#titleEdit").val("");
        //           $("#tagEdit").val("");
        //           $("#modalEdit").modal("hide");
        //           alert("Registro editado com sucesso!");
        //         })
        //         .catch((err) => console.log(err));
        //     }
        //   }
        //   function deleteRegister(e, id) {
        //     e.preventDefault();
        //     let buttonDel = getElement("buttonDeleteVideo");
        //     confirmDeleteNotify("Confirma a exclusão do vídeo ?");
        //     buttonDel.onclick = function () {
        //       deleteVideoFromFirebase(id);
        //     };
        //   }
        //   function deleteVideoFromFirebase(id) {
        //     firestore
        //       .collection("Videos")
        //       .doc(id)
        //       .delete()
        //       .then(() => {
        //         readVideoFromFirebase();
        //         closeToastNotificationDelete();
        //         notify("Registro deletado com sucesso.");
        //       })
        //       .catch((error) => {
        //         console.error("Error removing document: ", error);
        //       });
        //   }

        //   var myModal = new bootstrap.Modal(document.getElementById("modalPlay"), {
        //     keyboard: false,
        //   });

        //   let videoModal = document.getElementById("modalPlay");

        //   videoModal.addEventListener("hidden.bs.modal", () => {
        //     let iframeVideo = getElement("videoSource");
        //     iframeVideo.src = "";
        //   });
        //   function playVideo(id) {
        //     let videoSource = `https://www.youtube.com/embed/${id}?&autoplay=1`;
        //     let iframeVideo = getElement("videoSource");
        //     iframeVideo.src = videoSource;
        //     myModal.show();
        //   }
        //   function playEdit(id) {
        //     firestore
        //       .collection("Videos")
        //       .doc(id)
        //       .get()
        //       .then((querySnapshot) => {
        //         let doc = querySnapshot.data();
        //         getElement("id").value = doc.id;
        //         getElement("title").value = doc.title;
        //         subjectsList = doc.tags;
        //         let pills = doc.tags.map((sub) => createSubjectPill(sub));
        //         pills.forEach((pill) => addPillToSubjectList(pill));
        //       });
        //   }
        function readVideoFromFirebase() {
            let videos = [];
            firestore
                .collection("pedidos")
                .get()
                .then((querySnapshot) => {
                    querySnapshot.docs.forEach((doc, i) => {
                        doc.data().lista[i].produtos.forEach((e, i) => {
                            document.getElementById(`nome-firebase${i}`).value = e.nome
                            document.getElementById(`quantidade-firebase${i}`).value = e.quantidade
                            document.getElementById(`valor-firebase${i}`).value = e.valor
                        })

                    });

                });
        }

        function writeRecipeToFirebase(e) {


            let nome = document.getElementById(`nome-firebase${e}`).value
            let quantidade = document.getElementById(`quantidade-firebase${e}`).value
            let valor = document.getElementById(`valor-firebase${e}`).value



            const docref = firestore.collection('pedidos').doc('andersonfoiveira10@gmail.com')
            .update({
                "lista[0]/data": new Date()
            }).then(() => {
                readVideoFromFirebase();


            }).catch((err) => console.log(err));
        }


    //   function cleanChildren(id) {
    //     let element = document.getElementById(id);
    //     if (element.childElementCount == 0) return element;
    //     element.innerHTML = "";
    //     return element;
    //   }
    //   function appendHTML(element, content) {
    //     element.innerHTML = content;
    //   }
    //   function insertToPage(content) {
    //     let element = cleanChildren("videos_list");
    //     appendHTML(element, content);
    //   }
    //   function setMessageToModalNotify(message) {
    //     document.getElementById("toast_message").innerText = message;
    //   }
    //   function setMessageToModalConfirmDelete(message) {
    //     document.getElementById("confirm_message").innerText = message;
    //   }
    //   function convertToDateTimePtBr(date) {
    //     let day = date.toLocaleDateString("pt-br");
    //     let time = date.toLocaleTimeString("pt-br");
    //     return `${day} - ${time}`;
    //   }
    //   function setDateTimeToModalNotify() {
    //     document.getElementById("toast_time").innerText = convertToDateTimePtBr(
    //       new Date()
    //     );
    //   }
    //   function toastNotification() {
    //     let option = {
    //       animation: true,
    //       autohide: true,
    //       delay: 3000,
    //     };
    //     let toast = document.getElementById("liveToast");
    //     let alerter = new bootstrap.Toast(toast, option);
    //     alerter.show();
    //   }
    //   function toastNotificationDelete() {
    //     let option = {
    //       animation: true,
    //       autohide: true,
    //       delay: 5000,
    //     };
    //     let toast = document.getElementById("confirmDelete");
    //     let alerter = new bootstrap.Toast(toast, option);
    //     alerter.show();
    //   }
    //   function closeToastNotificationDelete() {
    //     let toast = document.getElementById("confirmDelete");
    //     let alerter = new bootstrap.Toast(toast);
    //     alerter.hide();
    //   }
    //   function notify(message) {
    //     setMessageToModalNotify(message);
    //     setDateTimeToModalNotify();
    //     toastNotification();
    //   }
    //   function confirmDeleteNotify(message) {
    //     setMessageToModalConfirmDelete(message);
    //     toastNotificationDelete();
    //   }
    //   function getElement(id) {
    //     try {
    //       let element = document.getElementById(id);
    //       if (!element) {
    //         console.log(
    //           `Error: id ${id} doesn't references any HTML valid object.`
    //         );
    //         return;
    //       }
    //       return element;
    //     } catch (error) {
    //       console.log(error);
    //     }
    //   }
    //   function createElement(tagName) {
    //     return document.createElement(tagName);
    //   }
    //   function setElementCssClass(element, className) {
    //     element.classList.add(className);
    //   }
    //   function setElementInnerText(element, text) {
    //     element.innerText = text;
    //   }
    //   function setElementInnerHTML(element, innerHTML) {
    //     element.innerHTML = innerHTML;
    //   }
    //   function appendChild(element, child) {
    //     element.appendChild(child);
    //   }
    //   function handleSubjectsList(newSubject) {
    //     return (subjectsList = [...subjectsList, newSubject]);
    //   }
    //   function handleRowsList(row) {
    //     rows = [...rows, row];
    //   }
    //   function createSubjectPill(value) {
    //     let mainDiv = createElement("div");
    //     setElementCssClass(mainDiv, "subjects_item");
    //     let divValue = createElement("div");
    //     divValue.appendChild(document.createTextNode(value));
    //     let divBtn = createElement("div");
    //     setElementCssClass(divBtn, "subject_button");
    //     let button = createElement("button");
    //     button.onclick = function () {
    //       removePillFromSubjectList(event, value);
    //     };
    //     setElementCssClass(button, "remove_subject");
    //     setElementInnerHTML(button, '<i class="fas fa-trash-alt"></i>');
    //     appendChild(divBtn, button);
    //     appendChild(mainDiv, divValue);
    //     appendChild(mainDiv, divBtn);
    //     return mainDiv;
    //   }
    //   function addPillToSubjectList(pill) {
    //     let element = getElement("subjects_container");
    //     appendChild(element, pill);
    //   }
    //   function addPillToRowsList(pill) {
    //     let element = getElement("rows_container");
    //     appendChild(element, pill);
    //   }
    //   function removePillFromSubjectList(e, value) {
    //     e.preventDefault();
    //     cleanChildren("subjects_container");
    //     subjectsList.splice(subjectsList.indexOf(value), 1);
    //     let pills = subjectsList.map((sub) => createSubjectPill(sub));
    //     pills.forEach((pill) => addPillToSubjectList(pill));
    //   }
    //   function isEmpty(value) {
    //     if (value == "") {
    //       notify("O campo ASSUNTO não pode ser vazio.");
    //       return true;
    //     }
    //   }
    //   function isEmpty(value) {
    //     let type = typeof value;
    //     console.log(type);
    //     if (type === "string") {
    //       if (value == "") {
    //         notify("O campo ASSUNTO não pode ser vazio.");
    //         return true;
    //       }
    //     }
    //     if (type === "object") {
    //       if (value.length <= 0) {
    //         notify("O campo ASSUNTO não pode ser vazio.");
    //         getElement("tag").focus();
    //         return true;
    //       }
    //     }
    //   }
    //   function alreadyExists(value) {
    //     if (subjectsList.includes(value.toLowerCase())) {
    //       notify("O assunto já está selecionado.");
    //       return true;
    //     }
    //   }
    //   function insertSubject(e) {
    //     e.preventDefault();
    //     let subject = getElement("tag");
    //     if (isEmpty(subject.value)) return;
    //     if (alreadyExists(subject.value)) return;
    //     let pill = createSubjectPill(subject.value);
    //     handleSubjectsList(subject.value);
    //     addPillToSubjectList(pill);
    //     subject.value = "";
    //     subject.focus();
    //   }
    //   function insertRecepiRow(e) {
    //     e.preventDefault();
    //     let subject = getElement("recepi_row");
    //     if (isEmpty(subject.value)) return;
    //     if (alreadyExists(subject.value)) return;
    //     let pill = createSubjectPill(subject.value);
    //     handleRowsList(subject.value);
    //     addPillToRowsList(pill);
    //     subject.value = "";
    //     subject.focus();
    //   }
    //   function setThumbnail(id) {
    //     document.getElementById(
    //       "recepi_video"
    //     ).src = `https://img.youtube.com/vi/${id}/0.jpg`;
    //     recipe_obj.video_id = id;
    //   }
    //   function setRecipeName(name) {
    //     document.getElementById("preview_title").textContent = name;
    //     recipe_obj.recepi_name = name;
    //   }
    //   function setRecipeSection(section) {
    //     section.name = section;
    //   }

    </script>
</body>

</html>